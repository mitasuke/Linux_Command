Apacheなどのサービスが起動できなくなった場合、
排他制御に使われるセマフォが最大値まで積んでしまっている可能性がある。

ログには以下のようなメッセージが出る。
No space left on device: Couldn't create accept lock

セマフォの状態を確認する場合はこのように。
# ipcs -s

ここに対象サービスのセマフォがたくさん積んでいたらあやしい。
このコマンドで1つずつセマフォを解放することができる。
# ipcrm -m <ID>

それよりもセマフォの最大値を増やした方が良いかもしれない。

最大値を確認
# /sbin/sysctl -a | grep sem
kernel.sem = 250	32000	32	128
（最大値は 128 という意味らしい）

/etc/sysctl.conf に以下を追記
kernel.sem = 250 32000 32 256
（最大値を256に増やす場合）

反映・確認
# /sbin/sysctl -p
# /sbin/sysctl -a | grep sem

これで起動できなかったサービスは起動できるようになっているはず。
